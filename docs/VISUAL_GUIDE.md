// docs/VISUAL_GUIDE.md

# Visual Implementation Guide - Dynamic Role System

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       USER LOGIN                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Backend Validates Credentials   â”‚
        â”‚  Fetches User + Permissions      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Redux Auth Slice                    â”‚
        â”‚  â”œâ”€ user                             â”‚
        â”‚  â”œâ”€ permissions: string[]            â”‚
        â”‚  â”œâ”€ customRoleId: string | undefinedâ”‚
        â”‚  â”œâ”€ accessToken                      â”‚
        â”‚  â””â”€ isAuthenticated: true            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                           â†“                â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚usePermissionâ”‚        â”‚    useUser       â”‚  â”‚Redux Selectors
   â”‚useUser      â”‚        â”‚                  â”‚  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                           â”‚                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚     Permission Guard Components     â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ â€¢ PermissionGuard.tsx               â”‚
        â”‚ â€¢ CanAccess.tsx                     â”‚
        â”‚ â€¢ ProtectedRoute.tsx                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                             â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ SHOW UI  â”‚               â”‚ HIDE/DISABLEâ”‚
   â”‚ Content  â”‚               â”‚ Fallback    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Login  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ POST /login
       â”‚ email, password
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend API     â”‚
â”‚  Validates       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â†’ âŒ Invalid â†’ Error Response
       â”‚
       â””â”€â†’ âœ… Valid
           â”‚
           â†“
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ Generate Tokens + Fetch Perms    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ Response:                        â”‚
       â”‚ {                                â”‚
       â”‚   user: {...},                   â”‚
       â”‚   permissions: [                 â”‚
       â”‚     "member:view",               â”‚
       â”‚     "member:create",             â”‚
       â”‚     "billing:view"               â”‚
       â”‚   ],                             â”‚
       â”‚   accessToken: "...",            â”‚
       â”‚   refreshToken: "..."            â”‚
       â”‚ }                                â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“ dispatch(loginUser())
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ Redux Auth State Updated         â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ Dashboard Renders                â”‚
       â”‚ - Sidebar filters by perms       â”‚
       â”‚ - Components show/hide via guardsâ”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Permission Check Flow

```
Component Renders
    â”‚
    â”œâ”€â†’ usePermission() / useUser() called
    â”‚
    â”œâ”€â†’ Get permissions from Redux: ["member:view", "member:create"]
    â”‚
    â”œâ”€â†’ Check Permission
    â”‚   â”‚
    â”‚   â”œâ”€â†’ hasPermission("member:create")?
    â”‚   â”‚   â”‚
    â”‚   â”‚   â”œâ”€â†’ Yes: return true
    â”‚   â”‚   â”‚   â”‚
    â”‚   â”‚   â”‚   â†“
    â”‚   â”‚   â”‚   âœ… RENDER COMPONENT
    â”‚   â”‚   â”‚
    â”‚   â”‚   â””â”€â†’ No: return false
    â”‚   â”‚       â”‚
    â”‚   â”‚       â†“
    â”‚   â”‚       âŒ SHOW FALLBACK or NOTHING
    â”‚   â”‚
    â”‚   â””â”€â†’ can("member", "create")?
    â”‚       â””â”€â†’ Equivalent to hasPermission("member:create")
```

## Component Usage Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Import Permission Component        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ <CanAccess               â”‚
    â”‚   resource="member"      â”‚
    â”‚   action="create"        â”‚
    â”‚ >                        â”‚
    â”‚   <Button>Add</Button>   â”‚
    â”‚ </CanAccess>             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Permission  â”‚       â”‚ No Permission   â”‚
â”‚ Granted     â”‚       â”‚ Granted         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Render:     â”‚       â”‚ Render:         â”‚
â”‚ <Button>    â”‚       â”‚ Nothing/Fallbackâ”‚
â”‚ Add         â”‚       â”‚ if provided     â”‚
â”‚ </Button>   â”‚       â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                         â”‚
    â†“                         â†“
 âœ… VISIBLE               âŒ HIDDEN
  & ENABLED              & DISABLED
```

## Permission Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PERMISSION MATRIX                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  MEMBER ACCESS (4)          PACKAGE ACCESS (4)                â”‚
â”‚  â”œâ”€ member:view             â”œâ”€ package:view                   â”‚
â”‚  â”œâ”€ member:create           â”œâ”€ package:create                 â”‚
â”‚  â”œâ”€ member:edit             â”œâ”€ package:edit                   â”‚
â”‚  â””â”€ member:delete           â””â”€ package:delete                 â”‚
â”‚                                                                â”‚
â”‚  BILLING ACCESS (4)         ANALYTICS (2)                      â”‚
â”‚  â”œâ”€ billing:view            â”œâ”€ analytics:view                 â”‚
â”‚  â”œâ”€ billing:create          â””â”€ analytics:export               â”‚
â”‚  â”œâ”€ billing:edit                                              â”‚
â”‚  â””â”€ billing:delete          SMS (2)                           â”‚
â”‚                             â”œâ”€ sms:view                       â”‚
â”‚  USER ACCESS (5)            â””â”€ sms:send                       â”‚
â”‚  â”œâ”€ access:view-users                                         â”‚
â”‚  â”œâ”€ access:create-role      TOTAL: 21 PERMISSIONS            â”‚
â”‚  â”œâ”€ access:edit-role                                         â”‚
â”‚  â”œâ”€ access:delete-role                                       â”‚
â”‚  â””â”€ access:assign-role                                       â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Sidebar Filtering Logic

```
Sidebar Component Initializes
    â”‚
    â”œâ”€â†’ Get user role: "manager"
    â”‚
    â”œâ”€â†’ Get user permissions: ["member:view", "member:create", "analytics:view"]
    â”‚
    â”œâ”€â†’ Call getSidebarForRole("manager", permissions)
    â”‚
    â”œâ”€â†’ Loop through sidebar items
    â”‚   â”‚
    â”‚   â”œâ”€â†’ Item: Overview (no permissions required)
    â”‚   â”‚   â””â”€â†’ âœ… SHOW
    â”‚   â”‚
    â”‚   â”œâ”€â†’ Item: Members (requires "member:view")
    â”‚   â”‚   â”‚
    â”‚   â”‚   â”œâ”€â†’ User has "member:view"?
    â”‚   â”‚   â”‚   â””â”€â†’ Yes: âœ… SHOW
    â”‚   â”‚   â”‚
    â”‚   â”‚   â””â”€â†’ User missing "member:view"?
    â”‚   â”‚       â””â”€â†’ No: âŒ HIDE
    â”‚   â”‚
    â”‚   â”œâ”€â†’ Item: Billing (requires "billing:view")
    â”‚   â”‚   â”‚
    â”‚   â”‚   â”œâ”€â†’ User has "billing:view"?
    â”‚   â”‚   â”‚   â””â”€â†’ No: âŒ HIDE
    â”‚   â”‚
    â”‚   â””â”€â†’ Item: Analytics (requires "analytics:view")
    â”‚       â””â”€â†’ User has "analytics:view"?
    â”‚           â””â”€â†’ Yes: âœ… SHOW
    â”‚
    â””â”€â†’ Render filtered sidebar
        â””â”€â†’ Only items user can access shown
```

## File Organization

```
silver-gym/
â”‚
â”œâ”€â”€ redux/
â”‚   â”œâ”€â”€ features/
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â””â”€â”€ authSlice.ts (stores permissions)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ roles/
â”‚   â”‚       â””â”€â”€ rolesSlice.ts (stores custom roles)
â”‚   â”‚
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ auth.ts (permission state)
â”‚   â”‚   â””â”€â”€ roles.ts (role types)
â”‚   â”‚
â”‚   â””â”€â”€ store/
â”‚       â””â”€â”€ index.ts (combined store)
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ usePermission.ts (permission checking)
â”‚   â””â”€â”€ useUser.ts (user + permissions)
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ shared/
â”‚   â”‚   â”œâ”€â”€ PermissionGuard.tsx (wrap components)
â”‚   â”‚   â”œâ”€â”€ CanAccess.tsx (resource:action wrapper)
â”‚   â”‚   â””â”€â”€ ProtectedRoute.tsx (page protection)
â”‚   â”‚
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â””â”€â”€ Sidebar/
â”‚   â”‚       â””â”€â”€ Sidebar.tsx (filters by perms)
â”‚   â”‚
â”‚   â””â”€â”€ examples/
â”‚       â””â”€â”€ DynamicRoleExamples.tsx
â”‚
â”œâ”€â”€ config/
â”‚   â””â”€â”€ sidebarConfig.tsx (sidebar with permissions)
â”‚
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ services/
â”‚       â”œâ”€â”€ roleService.ts (API integration)
â”‚       â””â”€â”€ permissionService.ts (utilities)
â”‚
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ permissions.ts (permission definitions)
â”‚   â””â”€â”€ user-access.ts (role types)
â”‚
â””â”€â”€ docs/
    â”œâ”€â”€ DYNAMIC_ROLE_IMPLEMENTATION.md (complete guide)
    â”œâ”€â”€ QUICK_REFERENCE.md (quick lookup)
    â”œâ”€â”€ IMPLEMENTATION_CHECKLIST.md (progress)
    â”œâ”€â”€ IMPLEMENTATION_SUMMARY.md (overview)
    â”œâ”€â”€ DEVELOPER_GUIDE.md (how to use)
    â””â”€â”€ VISUAL_GUIDE.md (this file)
```

## Three-Level Access Control

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LEVEL 1: PAGE LEVEL                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <ProtectedRoute permission="admin:access">                      â”‚
â”‚   <AdminPage />                                                  â”‚
â”‚ </ProtectedRoute>                                                â”‚
â”‚                                                                  â”‚
â”‚ Decision: Can user ACCESS this entire page?                      â”‚
â”‚ Result: REDIRECT if denied, SHOW page if allowed                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LEVEL 2: FEATURE LEVEL                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <PermissionGuard permission="member:create">                    â”‚
â”‚   <CreateMemberSection />                                       â”‚
â”‚ </PermissionGuard>                                               â”‚
â”‚                                                                  â”‚
â”‚ Decision: Can user SEE this section/feature?                    â”‚
â”‚ Result: HIDE section if denied, SHOW if allowed                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LEVEL 3: COMPONENT LEVEL                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <CanAccess resource="member" action="delete">                   â”‚
â”‚   <Button>Delete</Button>                                        â”‚
â”‚ </CanAccess>                                                     â”‚
â”‚                                                                  â”‚
â”‚ Decision: Can user INTERACT with this component?                â”‚
â”‚ Result: HIDE component if denied, SHOW if allowed               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## State Tree

```
Redux Store
â”œâ”€â”€ auth (AuthState)
â”‚   â”œâ”€â”€ user: {
â”‚   â”‚   id: "1",
â”‚   â”‚   name: "John Doe",
â”‚   â”‚   email: "john@example.com",
â”‚   â”‚   role: "manager",
â”‚   â”‚   permissions: ["member:view", "member:create"],
â”‚   â”‚   customRoleId: undefined
â”‚   â”‚ }
â”‚   â”œâ”€â”€ permissions: ["member:view", "member:create"]
â”‚   â”œâ”€â”€ customRoleId: undefined
â”‚   â”œâ”€â”€ accessToken: "token..."
â”‚   â”œâ”€â”€ refreshToken: "token..."
â”‚   â”œâ”€â”€ isAuthenticated: true
â”‚   â”œâ”€â”€ isLoading: false
â”‚   â””â”€â”€ error: null
â”‚
â””â”€â”€ roles (RolesState)
    â”œâ”€â”€ allRoles: [{
    â”‚   roleId: "role-1",
    â”‚   roleName: "Manager",
    â”‚   permissions: ["member:view", ...],
    â”‚   isCustom: false,
    â”‚   status: "active"
    â”‚ }, ...]
    â”œâ”€â”€ customRoles: [...]
    â”œâ”€â”€ isLoading: false
    â””â”€â”€ error: null
```

## Decision Tree: Which Option to Use?

```
Do I need permission checking?
â”‚
â”œâ”€â†’ Yes
â”‚  â”‚
â”‚  â”œâ”€â†’ Complex conditional logic?
â”‚  â”‚   â”‚
â”‚  â”‚   â”œâ”€â†’ Yes: Use usePermission() hook
â”‚  â”‚   â”‚   Example: Multiple conditions, different actions
â”‚  â”‚   â”‚
â”‚  â”‚   â””â”€â†’ No: Use CanAccess/PermissionGuard
â”‚  â”‚       Example: Simple show/hide
â”‚  â”‚
â”‚  â”œâ”€â†’ Entire page needs protection?
â”‚  â”‚   â”‚
â”‚  â”‚   â”œâ”€â†’ Yes: Use <ProtectedRoute>
â”‚  â”‚   â”‚   Redirect to dashboard if denied
â”‚  â”‚   â”‚
â”‚  â”‚   â””â”€â†’ No: Use <PermissionGuard>
â”‚  â”‚       Show fallback if denied
â”‚  â”‚
â”‚  â””â”€â†’ Single button/component?
â”‚      â”‚
â”‚      â”œâ”€â†’ Yes: Use <CanAccess>
â”‚      â”‚   Clean, simple syntax
â”‚      â”‚
â”‚      â””â”€â†’ No: Use usePermission()
â”‚          More control, more powerful
â”‚
â””â”€â†’ No: No permission checking needed
```

## Integration Timeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Week 1: Core Implementation              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… Type definitions                       â”‚
â”‚ âœ… Redux state management                 â”‚
â”‚ âœ… Hooks and components                   â”‚
â”‚ âœ… Sidebar integration                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Week 2: Backend Integration              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”„ API endpoints for roles               â”‚
â”‚ ğŸ”„ API endpoints for permissions         â”‚
â”‚ ğŸ”„ Login endpoint returns permissions    â”‚
â”‚ ğŸ”„ Permission validation middleware      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Week 3: Feature Implementation           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‹ Role management UI                    â”‚
â”‚ ğŸ“‹ User assignment UI                    â”‚
â”‚ ğŸ“‹ Permission matrix UI                  â”‚
â”‚ ğŸ“‹ Testing                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Week 4: Polish & Deploy                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸš€ Performance optimization              â”‚
â”‚ ğŸš€ Monitoring setup                      â”‚
â”‚ ğŸš€ Documentation                         â”‚
â”‚ ğŸš€ Production deployment                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Quick Lookup Chart

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SCENARIO            â”‚ WHAT TO USE                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Hide a button       â”‚ <CanAccess resource="x" action="y" />   â”‚
â”‚ Hide a section      â”‚ <PermissionGuard permission="x:y" />    â”‚
â”‚ Protect a page      â”‚ <ProtectedRoute permission="x:y" />     â”‚
â”‚ Complex logic       â”‚ const {can} = usePermission()           â”‚
â”‚ Check any of N      â”‚ hasAnyPermission([...])                 â”‚
â”‚ Check all of N      â”‚ hasAllPermissions([...])                â”‚
â”‚ Get all perms       â”‚ getAllPermissions()                      â”‚
â”‚ Access user data    â”‚ const {user} = useUser()                â”‚
â”‚ Create a role       â”‚ roleService.createRole(...)             â”‚
â”‚ Assign role         â”‚ roleService.assignRoleToUser(...)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

End of Visual Guide
